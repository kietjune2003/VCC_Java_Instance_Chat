2025-08-04T09:32:04.330+07:00  INFO 24968 --- [chatapp] [main] com.example.chat.ChatappApplication      : Starting ChatappApplication using Java 22.0.2 with PID 24968 (D:\Code\VCC_Java_Framework_Ass\chat\target\classes started by Admin in D:\Code\VCC_Java_Framework_Ass\chat)
2025-08-04T09:32:04.341+07:00 DEBUG 24968 --- [chatapp] [main] com.example.chat.ChatappApplication      : Running with Spring Boot v3.5.4, Spring v6.2.9
2025-08-04T09:32:04.343+07:00  INFO 24968 --- [chatapp] [main] com.example.chat.ChatappApplication      : No active profile set, falling back to 1 default profile: "default"
2025-08-04T09:32:05.601+07:00  INFO 24968 --- [chatapp] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-08-04T09:32:05.690+07:00  INFO 24968 --- [chatapp] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 75 ms. Found 3 JPA repository interfaces.
2025-08-04T09:32:06.666+07:00  INFO 24968 --- [chatapp] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-08-04T09:32:06.695+07:00  INFO 24968 --- [chatapp] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-08-04T09:32:06.696+07:00  INFO 24968 --- [chatapp] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.43]
2025-08-04T09:32:06.774+07:00  INFO 24968 --- [chatapp] [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-08-04T09:32:06.775+07:00  INFO 24968 --- [chatapp] [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2361 ms
2025-08-04T09:32:06.798+07:00  INFO 24968 --- [chatapp] [main] com.example.chat.util.JwtUtil            : JWT Util initialized with secret key (length: 47)
2025-08-04T09:32:07.045+07:00  INFO 24968 --- [chatapp] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-08-04T09:32:07.149+07:00  INFO 24968 --- [chatapp] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.22.Final
2025-08-04T09:32:07.237+07:00  INFO 24968 --- [chatapp] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-08-04T09:32:07.693+07:00  INFO 24968 --- [chatapp] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-08-04T09:32:07.731+07:00  INFO 24968 --- [chatapp] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-08-04T09:32:07.946+07:00  INFO 24968 --- [chatapp] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@2bdcfcf
2025-08-04T09:32:07.950+07:00  INFO 24968 --- [chatapp] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-08-04T09:32:08.016+07:00  WARN 24968 --- [chatapp] [main] o.h.e.j.e.i.JdbcEnvironmentInitiator     : HHH000339: Could not obtain connection metadata: java.sql.SQLSyntaxErrorException: Unknown column 'RESERVED' in 'WHERE'
2025-08-04T09:32:08.037+07:00  WARN 24968 --- [chatapp] [main] org.hibernate.orm.deprecation            : HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-08-04T09:32:08.038+07:00  WARN 24968 --- [chatapp] [main] org.hibernate.orm.deprecation            : HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-08-04T09:32:08.050+07:00  INFO 24968 --- [chatapp] [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-08-04T09:32:08.963+07:00  INFO 24968 --- [chatapp] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-08-04T09:32:09.399+07:00  INFO 24968 --- [chatapp] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-08-04T09:32:09.700+07:00  INFO 24968 --- [chatapp] [main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-08-04T09:32:10.836+07:00  WARN 24968 --- [chatapp] [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-08-04T09:32:10.949+07:00  WARN 24968 --- [chatapp] [main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 9e6b2e52-5d29-48e7-84ea-25501c183c71

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-08-04T09:32:10.973+07:00  INFO 24968 --- [chatapp] [main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-08-04T09:32:11.675+07:00 DEBUG 24968 --- [chatapp] [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, JwtFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-08-04T09:32:12.288+07:00  INFO 24968 --- [chatapp] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-08-04T09:32:12.305+07:00  INFO 24968 --- [chatapp] [main] com.example.chat.ChatappApplication      : Started ChatappApplication in 8.959 seconds (process running for 9.693)
2025-08-04T09:39:11.670+07:00  INFO 24968 --- [chatapp] [http-nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-08-04T09:39:11.671+07:00  INFO 24968 --- [chatapp] [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-08-04T09:39:11.674+07:00  INFO 24968 --- [chatapp] [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 3 ms
2025-08-04T09:39:11.705+07:00 DEBUG 24968 --- [chatapp] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing POST /api/login
2025-08-04T09:39:11.713+07:00 DEBUG 24968 --- [chatapp] [http-nio-8080-exec-1] com.example.chat.filter.JwtFilter        : No Authorization header found, continuing filter chain
2025-08-04T09:39:11.716+07:00 DEBUG 24968 --- [chatapp] [http-nio-8080-exec-1] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-08-04T09:39:11.719+07:00 DEBUG 24968 --- [chatapp] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured POST /api/login
2025-08-04T09:39:11.719+07:00 DEBUG 24968 --- [chatapp] [http-nio-8080-exec-1] com.example.chat.filter.JwtFilter        : No Authorization header found, continuing filter chain
2025-08-04T09:39:11.810+07:00  INFO 24968 --- [chatapp] [http-nio-8080-exec-1] c.e.chat.controller.AuthController       : API /api/login called for user 'alice'
2025-08-04T09:39:11.810+07:00  INFO 24968 --- [chatapp] [http-nio-8080-exec-1] c.e.chat.service.impl.AuthServiceImpl    : Login attempt for username: alice
2025-08-04T09:39:12.120+07:00 DEBUG 24968 --- [chatapp] [http-nio-8080-exec-1] com.example.chat.util.JwtUtil            : Generated access token for user 'alice' with userAgent 'PostmanRuntime/7.28.4'
2025-08-04T09:39:12.121+07:00 DEBUG 24968 --- [chatapp] [http-nio-8080-exec-1] com.example.chat.util.JwtUtil            : Generated refresh token for user 'alice' with userAgent 'PostmanRuntime/7.28.4'
2025-08-04T09:39:27.787+07:00 DEBUG 24968 --- [chatapp] [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/friends
2025-08-04T09:39:27.819+07:00 DEBUG 24968 --- [chatapp] [http-nio-8080-exec-2] com.example.chat.util.JwtUtil            : Token validated successfully for user 'alice'
2025-08-04T09:39:27.820+07:00 DEBUG 24968 --- [chatapp] [http-nio-8080-exec-2] com.example.chat.filter.JwtFilter        : JWT validated for user 'alice' and userAgent matched
2025-08-04T09:39:27.820+07:00 DEBUG 24968 --- [chatapp] [http-nio-8080-exec-2] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-08-04T09:39:27.820+07:00 DEBUG 24968 --- [chatapp] [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/friends
2025-08-04T09:39:27.824+07:00 DEBUG 24968 --- [chatapp] [http-nio-8080-exec-2] com.example.chat.util.JwtUtil            : Token validated successfully for user 'alice'
2025-08-04T09:39:27.825+07:00 DEBUG 24968 --- [chatapp] [http-nio-8080-exec-2] com.example.chat.filter.JwtFilter        : JWT validated for user 'alice' and userAgent matched
2025-08-04T09:39:27.829+07:00  INFO 24968 --- [chatapp] [http-nio-8080-exec-2] c.e.chat.controller.FriendController     : API /api/friends called for user with userAgent 'PostmanRuntime/7.28.4'
2025-08-04T09:39:27.832+07:00 DEBUG 24968 --- [chatapp] [http-nio-8080-exec-2] com.example.chat.util.JwtUtil            : Token validated successfully for user 'alice'
2025-08-04T09:39:27.833+07:00  INFO 24968 --- [chatapp] [http-nio-8080-exec-2] c.e.chat.service.impl.FriendServiceImpl  : Fetching friend list for user: alice
2025-08-04T09:39:27.840+07:00  INFO 24968 --- [chatapp] [http-nio-8080-exec-2] c.e.chat.service.impl.FriendServiceImpl  : User 'alice' has 1 friend(s)
2025-08-04T09:39:36.586+07:00 DEBUG 24968 --- [chatapp] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing POST /api/send
2025-08-04T09:39:36.588+07:00 DEBUG 24968 --- [chatapp] [http-nio-8080-exec-3] com.example.chat.util.JwtUtil            : Token validated successfully for user 'alice'
2025-08-04T09:39:36.588+07:00 DEBUG 24968 --- [chatapp] [http-nio-8080-exec-3] com.example.chat.filter.JwtFilter        : JWT validated for user 'alice' and userAgent matched
2025-08-04T09:39:36.588+07:00 DEBUG 24968 --- [chatapp] [http-nio-8080-exec-3] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-08-04T09:39:36.588+07:00 DEBUG 24968 --- [chatapp] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured POST /api/send
2025-08-04T09:39:36.591+07:00 DEBUG 24968 --- [chatapp] [http-nio-8080-exec-3] com.example.chat.util.JwtUtil            : Token validated successfully for user 'alice'
2025-08-04T09:39:36.591+07:00 DEBUG 24968 --- [chatapp] [http-nio-8080-exec-3] com.example.chat.filter.JwtFilter        : JWT validated for user 'alice' and userAgent matched
2025-08-04T09:39:36.624+07:00  INFO 24968 --- [chatapp] [http-nio-8080-exec-3] c.e.chat.controller.MessageController    : Received message send request from 'bob'
2025-08-04T09:39:36.627+07:00 DEBUG 24968 --- [chatapp] [http-nio-8080-exec-3] com.example.chat.util.JwtUtil            : Token validated successfully for user 'alice'
2025-08-04T09:39:36.627+07:00  INFO 24968 --- [chatapp] [http-nio-8080-exec-3] c.e.c.service.impl.MessageServiceImpl    : Sending message from 'alice' to 'bob'
2025-08-04T09:39:36.633+07:00  INFO 24968 --- [chatapp] [http-nio-8080-exec-3] c.e.c.service.impl.MessageServiceImpl    : Saved text message from 'alice' to 'bob'
2025-08-04T09:39:36.643+07:00  INFO 24968 --- [chatapp] [http-nio-8080-exec-3] c.e.c.service.impl.MessageServiceImpl    : Stored message for offline user 'bob'
2025-08-04T09:39:36.643+07:00  INFO 24968 --- [chatapp] [http-nio-8080-exec-3] c.e.chat.controller.MessageController    : Message queued for 'bob'
2025-08-04T09:39:50.815+07:00 DEBUG 24968 --- [chatapp] [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing POST /api/send
2025-08-04T09:39:50.825+07:00 ERROR 24968 --- [chatapp] [http-nio-8080-exec-6] com.example.chat.util.JwtUtil            : User agent mismatch for token: expected 'PostmanRuntime/7.28.4', got 'PostmanRuntime/7.45.0'
2025-08-04T09:39:50.835+07:00 ERROR 24968 --- [chatapp] [http-nio-8080-exec-6] com.example.chat.util.JwtUtil            : Invalid JWT: User agent mismatch
2025-08-04T09:39:50.836+07:00 ERROR 24968 --- [chatapp] [http-nio-8080-exec-6] com.example.chat.filter.JwtFilter        : Invalid JWT token: User agent mismatch
2025-08-04T09:39:50.864+07:00 DEBUG 24968 --- [chatapp] [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing POST /error
2025-08-04T09:39:50.891+07:00 ERROR 24968 --- [chatapp] [http-nio-8080-exec-6] com.example.chat.util.JwtUtil            : User agent mismatch for token: expected 'PostmanRuntime/7.28.4', got 'PostmanRuntime/7.45.0'
2025-08-04T09:39:50.892+07:00 ERROR 24968 --- [chatapp] [http-nio-8080-exec-6] com.example.chat.util.JwtUtil            : Invalid JWT: User agent mismatch
2025-08-04T09:39:50.893+07:00 ERROR 24968 --- [chatapp] [http-nio-8080-exec-6] com.example.chat.filter.JwtFilter        : Invalid JWT token: User agent mismatch
2025-08-04T09:40:19.245+07:00 DEBUG 24968 --- [chatapp] [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing POST /api/send
2025-08-04T09:40:19.248+07:00 DEBUG 24968 --- [chatapp] [http-nio-8080-exec-7] com.example.chat.util.JwtUtil            : Token validated successfully for user 'alice'
2025-08-04T09:40:19.249+07:00 DEBUG 24968 --- [chatapp] [http-nio-8080-exec-7] com.example.chat.filter.JwtFilter        : JWT validated for user 'alice' and userAgent matched
2025-08-04T09:40:19.249+07:00 DEBUG 24968 --- [chatapp] [http-nio-8080-exec-7] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-08-04T09:40:19.249+07:00 DEBUG 24968 --- [chatapp] [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured POST /api/send
2025-08-04T09:40:19.252+07:00 DEBUG 24968 --- [chatapp] [http-nio-8080-exec-7] com.example.chat.util.JwtUtil            : Token validated successfully for user 'alice'
2025-08-04T09:40:19.252+07:00 DEBUG 24968 --- [chatapp] [http-nio-8080-exec-7] com.example.chat.filter.JwtFilter        : JWT validated for user 'alice' and userAgent matched
2025-08-04T09:40:19.258+07:00  INFO 24968 --- [chatapp] [http-nio-8080-exec-7] c.e.chat.controller.MessageController    : Received message send request from 'bob'
2025-08-04T09:40:19.260+07:00 DEBUG 24968 --- [chatapp] [http-nio-8080-exec-7] com.example.chat.util.JwtUtil            : Token validated successfully for user 'alice'
2025-08-04T09:40:19.260+07:00  INFO 24968 --- [chatapp] [http-nio-8080-exec-7] c.e.c.service.impl.MessageServiceImpl    : Sending message from 'alice' to 'bob'
2025-08-04T09:40:19.317+07:00  INFO 24968 --- [chatapp] [http-nio-8080-exec-7] c.e.c.service.impl.MessageServiceImpl    : Saved file message from 'alice' to 'bob' at '349da8f0-e445-4bb8-b1e1-6a1c04aefff0_chatapp_mysql_test_collection (1).json'
2025-08-04T09:40:19.323+07:00  INFO 24968 --- [chatapp] [http-nio-8080-exec-7] c.e.c.service.impl.MessageServiceImpl    : Stored message for offline user 'bob'
2025-08-04T09:40:19.323+07:00  INFO 24968 --- [chatapp] [http-nio-8080-exec-7] c.e.chat.controller.MessageController    : Message queued for 'bob'
2025-08-04T09:41:52.457+07:00 DEBUG 24968 --- [chatapp] [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing POST /api/login
2025-08-04T09:41:52.458+07:00 DEBUG 24968 --- [chatapp] [http-nio-8080-exec-10] com.example.chat.filter.JwtFilter        : No Authorization header found, continuing filter chain
2025-08-04T09:41:52.458+07:00 DEBUG 24968 --- [chatapp] [http-nio-8080-exec-10] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-08-04T09:41:52.458+07:00 DEBUG 24968 --- [chatapp] [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured POST /api/login
2025-08-04T09:41:52.458+07:00 DEBUG 24968 --- [chatapp] [http-nio-8080-exec-10] com.example.chat.filter.JwtFilter        : No Authorization header found, continuing filter chain
2025-08-04T09:41:52.459+07:00  INFO 24968 --- [chatapp] [http-nio-8080-exec-10] c.e.chat.controller.AuthController       : API /api/login called for user 'bob'
2025-08-04T09:41:52.459+07:00  INFO 24968 --- [chatapp] [http-nio-8080-exec-10] c.e.chat.service.impl.AuthServiceImpl    : Login attempt for username: bob
2025-08-04T09:42:09.105+07:00 DEBUG 24968 --- [chatapp] [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing POST /api/login
2025-08-04T09:42:09.105+07:00 DEBUG 24968 --- [chatapp] [http-nio-8080-exec-9] com.example.chat.filter.JwtFilter        : No Authorization header found, continuing filter chain
2025-08-04T09:42:09.105+07:00 DEBUG 24968 --- [chatapp] [http-nio-8080-exec-9] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-08-04T09:42:09.105+07:00 DEBUG 24968 --- [chatapp] [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured POST /api/login
2025-08-04T09:42:09.106+07:00 DEBUG 24968 --- [chatapp] [http-nio-8080-exec-9] com.example.chat.filter.JwtFilter        : No Authorization header found, continuing filter chain
2025-08-04T09:42:09.106+07:00  INFO 24968 --- [chatapp] [http-nio-8080-exec-9] c.e.chat.controller.AuthController       : API /api/login called for user 'bob'
2025-08-04T09:42:09.107+07:00  INFO 24968 --- [chatapp] [http-nio-8080-exec-9] c.e.chat.service.impl.AuthServiceImpl    : Login attempt for username: bob
2025-08-04T09:42:09.113+07:00 DEBUG 24968 --- [chatapp] [http-nio-8080-exec-9] com.example.chat.util.JwtUtil            : Generated access token for user 'bob' with userAgent 'PostmanRuntime/7.28.4'
2025-08-04T09:42:09.115+07:00 DEBUG 24968 --- [chatapp] [http-nio-8080-exec-9] com.example.chat.util.JwtUtil            : Generated refresh token for user 'bob' with userAgent 'PostmanRuntime/7.28.4'
2025-08-04T09:42:30.088+07:00 DEBUG 24968 --- [chatapp] [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/messages
2025-08-04T09:42:30.090+07:00 DEBUG 24968 --- [chatapp] [http-nio-8080-exec-4] com.example.chat.util.JwtUtil            : Token validated successfully for user 'bob'
2025-08-04T09:42:30.090+07:00 DEBUG 24968 --- [chatapp] [http-nio-8080-exec-4] com.example.chat.filter.JwtFilter        : JWT validated for user 'bob' and userAgent matched
2025-08-04T09:42:30.090+07:00 DEBUG 24968 --- [chatapp] [http-nio-8080-exec-4] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-08-04T09:42:30.090+07:00 DEBUG 24968 --- [chatapp] [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/messages
2025-08-04T09:42:30.091+07:00 DEBUG 24968 --- [chatapp] [http-nio-8080-exec-4] com.example.chat.util.JwtUtil            : Token validated successfully for user 'bob'
2025-08-04T09:42:30.092+07:00 DEBUG 24968 --- [chatapp] [http-nio-8080-exec-4] com.example.chat.filter.JwtFilter        : JWT validated for user 'bob' and userAgent matched
2025-08-04T09:42:30.092+07:00  INFO 24968 --- [chatapp] [http-nio-8080-exec-4] c.e.chat.controller.MessageController    : Polling for new messages
2025-08-04T09:42:30.094+07:00 DEBUG 24968 --- [chatapp] [http-nio-8080-exec-4] com.example.chat.util.JwtUtil            : Token validated successfully for user 'bob'
2025-08-04T09:42:30.094+07:00  INFO 24968 --- [chatapp] [http-nio-8080-exec-4] c.e.c.service.impl.MessageServiceImpl    : User 'bob' is polling for new messages
2025-08-04T09:42:30.132+07:00  INFO 24968 --- [chatapp] [http-nio-8080-exec-4] c.e.c.service.impl.MessageServiceImpl    : Returned 2 pending message(s) to 'bob'
2025-08-04T09:42:30.133+07:00 DEBUG 24968 --- [chatapp] [http-nio-8080-exec-4] c.e.chat.controller.MessageController    : Returned 1 message(s)
2025-08-04T09:42:41.942+07:00 DEBUG 24968 --- [chatapp] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/messages
2025-08-04T09:42:41.944+07:00 DEBUG 24968 --- [chatapp] [http-nio-8080-exec-1] com.example.chat.util.JwtUtil            : Token validated successfully for user 'bob'
2025-08-04T09:42:41.944+07:00 DEBUG 24968 --- [chatapp] [http-nio-8080-exec-1] com.example.chat.filter.JwtFilter        : JWT validated for user 'bob' and userAgent matched
2025-08-04T09:42:41.945+07:00 DEBUG 24968 --- [chatapp] [http-nio-8080-exec-1] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-08-04T09:42:41.945+07:00 DEBUG 24968 --- [chatapp] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/messages
2025-08-04T09:42:41.946+07:00 DEBUG 24968 --- [chatapp] [http-nio-8080-exec-1] com.example.chat.util.JwtUtil            : Token validated successfully for user 'bob'
2025-08-04T09:42:41.947+07:00 DEBUG 24968 --- [chatapp] [http-nio-8080-exec-1] com.example.chat.filter.JwtFilter        : JWT validated for user 'bob' and userAgent matched
2025-08-04T09:42:41.947+07:00  INFO 24968 --- [chatapp] [http-nio-8080-exec-1] c.e.chat.controller.MessageController    : Polling for new messages
2025-08-04T09:42:41.950+07:00 DEBUG 24968 --- [chatapp] [http-nio-8080-exec-1] com.example.chat.util.JwtUtil            : Token validated successfully for user 'bob'
2025-08-04T09:42:41.950+07:00  INFO 24968 --- [chatapp] [http-nio-8080-exec-1] c.e.c.service.impl.MessageServiceImpl    : User 'bob' is polling for new messages
2025-08-04T09:42:51.961+07:00  INFO 24968 --- [chatapp] [http-nio-8080-exec-1] c.e.c.service.impl.MessageServiceImpl    : No new message for 'bob'
2025-08-04T09:42:51.961+07:00 DEBUG 24968 --- [chatapp] [http-nio-8080-exec-1] c.e.chat.controller.MessageController    : Returned 0 message(s)
2025-08-04T09:46:01.644+07:00 DEBUG 24968 --- [chatapp] [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/file/349da8f0-e445-4bb8-b1e1-6a1c04aefff0_chatapp_mysql_test_collection (1).json
2025-08-04T09:46:01.648+07:00 ERROR 24968 --- [chatapp] [http-nio-8080-exec-6] com.example.chat.util.JwtUtil            : User agent mismatch for token: expected 'PostmanRuntime/7.28.4', got 'PostmanRuntime/7.45.0'
2025-08-04T09:46:01.649+07:00 ERROR 24968 --- [chatapp] [http-nio-8080-exec-6] com.example.chat.util.JwtUtil            : Invalid JWT: User agent mismatch
2025-08-04T09:46:01.649+07:00 ERROR 24968 --- [chatapp] [http-nio-8080-exec-6] com.example.chat.filter.JwtFilter        : Invalid JWT token: User agent mismatch
2025-08-04T09:46:01.650+07:00 DEBUG 24968 --- [chatapp] [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /error
2025-08-04T09:46:01.654+07:00 ERROR 24968 --- [chatapp] [http-nio-8080-exec-6] com.example.chat.util.JwtUtil            : User agent mismatch for token: expected 'PostmanRuntime/7.28.4', got 'PostmanRuntime/7.45.0'
2025-08-04T09:46:01.654+07:00 ERROR 24968 --- [chatapp] [http-nio-8080-exec-6] com.example.chat.util.JwtUtil            : Invalid JWT: User agent mismatch
2025-08-04T09:46:01.655+07:00 ERROR 24968 --- [chatapp] [http-nio-8080-exec-6] com.example.chat.filter.JwtFilter        : Invalid JWT token: User agent mismatch
2025-08-04T09:46:23.925+07:00 DEBUG 24968 --- [chatapp] [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/file/349da8f0-e445-4bb8-b1e1-6a1c04aefff0_chatapp_mysql_test_collection (1).json
2025-08-04T09:46:23.929+07:00 DEBUG 24968 --- [chatapp] [http-nio-8080-exec-7] com.example.chat.util.JwtUtil            : Token validated successfully for user 'bob'
2025-08-04T09:46:23.929+07:00 DEBUG 24968 --- [chatapp] [http-nio-8080-exec-7] com.example.chat.filter.JwtFilter        : JWT validated for user 'bob' and userAgent matched
2025-08-04T09:46:23.930+07:00 DEBUG 24968 --- [chatapp] [http-nio-8080-exec-7] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-08-04T09:46:23.930+07:00 DEBUG 24968 --- [chatapp] [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/file/349da8f0-e445-4bb8-b1e1-6a1c04aefff0_chatapp_mysql_test_collection (1).json
2025-08-04T09:46:23.933+07:00 DEBUG 24968 --- [chatapp] [http-nio-8080-exec-7] com.example.chat.util.JwtUtil            : Token validated successfully for user 'bob'
2025-08-04T09:46:23.933+07:00 DEBUG 24968 --- [chatapp] [http-nio-8080-exec-7] com.example.chat.filter.JwtFilter        : JWT validated for user 'bob' and userAgent matched
2025-08-04T09:46:23.941+07:00  INFO 24968 --- [chatapp] [http-nio-8080-exec-7] c.e.chat.controller.MessageController    : User requested file: 349da8f0-e445-4bb8-b1e1-6a1c04aefff0_chatapp_mysql_test_collection (1).json
2025-08-04T09:46:23.946+07:00 DEBUG 24968 --- [chatapp] [http-nio-8080-exec-7] com.example.chat.util.JwtUtil            : Token validated successfully for user 'bob'
2025-08-04T09:46:23.946+07:00  INFO 24968 --- [chatapp] [http-nio-8080-exec-7] c.e.c.service.impl.MessageServiceImpl    : User 'bob' requests file '349da8f0-e445-4bb8-b1e1-6a1c04aefff0_chatapp_mysql_test_collection (1).json'
2025-08-04T09:46:23.954+07:00 DEBUG 24968 --- [chatapp] [http-nio-8080-exec-7] c.e.chat.controller.MessageController    : File '349da8f0-e445-4bb8-b1e1-6a1c04aefff0_chatapp_mysql_test_collection (1).json' successfully returned
2025-08-04T09:53:11.829+07:00  INFO 24968 --- [chatapp] [SpringApplicationShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2025-08-04T09:53:11.839+07:00  INFO 24968 --- [chatapp] [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2025-08-04T09:53:11.844+07:00  INFO 24968 --- [chatapp] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-08-04T09:53:11.847+07:00  INFO 24968 --- [chatapp] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-08-04T09:53:11.859+07:00  INFO 24968 --- [chatapp] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-08-04T09:53:18.005+07:00  INFO 16128 --- [chatapp] [main] com.example.chat.ChatappApplication      : Starting ChatappApplication using Java 22.0.2 with PID 16128 (D:\Code\VCC_Java_Framework_Ass\chat\target\classes started by Admin in D:\Code\VCC_Java_Framework_Ass\chat)
2025-08-04T09:53:18.007+07:00 DEBUG 16128 --- [chatapp] [main] com.example.chat.ChatappApplication      : Running with Spring Boot v3.5.4, Spring v6.2.9
2025-08-04T09:53:18.009+07:00  INFO 16128 --- [chatapp] [main] com.example.chat.ChatappApplication      : No active profile set, falling back to 1 default profile: "default"
2025-08-04T09:53:19.197+07:00  INFO 16128 --- [chatapp] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-08-04T09:53:19.270+07:00  INFO 16128 --- [chatapp] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 60 ms. Found 3 JPA repository interfaces.
2025-08-04T09:53:20.031+07:00  INFO 16128 --- [chatapp] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-08-04T09:53:20.048+07:00  INFO 16128 --- [chatapp] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-08-04T09:53:20.048+07:00  INFO 16128 --- [chatapp] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.43]
2025-08-04T09:53:20.119+07:00  INFO 16128 --- [chatapp] [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-08-04T09:53:20.119+07:00  INFO 16128 --- [chatapp] [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2048 ms
2025-08-04T09:53:20.136+07:00  INFO 16128 --- [chatapp] [main] com.example.chat.util.JwtUtil            : JWT Util initialized with secret key (length: 47)
2025-08-04T09:53:20.297+07:00  INFO 16128 --- [chatapp] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-08-04T09:53:20.388+07:00  INFO 16128 --- [chatapp] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.22.Final
2025-08-04T09:53:20.439+07:00  INFO 16128 --- [chatapp] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-08-04T09:53:20.798+07:00  INFO 16128 --- [chatapp] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-08-04T09:53:20.840+07:00  INFO 16128 --- [chatapp] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-08-04T09:53:21.026+07:00  INFO 16128 --- [chatapp] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@5871a482
2025-08-04T09:53:21.030+07:00  INFO 16128 --- [chatapp] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-08-04T09:53:21.089+07:00  WARN 16128 --- [chatapp] [main] o.h.e.j.e.i.JdbcEnvironmentInitiator     : HHH000339: Could not obtain connection metadata: java.sql.SQLSyntaxErrorException: Unknown column 'RESERVED' in 'WHERE'
2025-08-04T09:53:21.120+07:00  WARN 16128 --- [chatapp] [main] org.hibernate.orm.deprecation            : HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-08-04T09:53:21.121+07:00  WARN 16128 --- [chatapp] [main] org.hibernate.orm.deprecation            : HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-08-04T09:53:21.134+07:00  INFO 16128 --- [chatapp] [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-08-04T09:53:22.117+07:00  INFO 16128 --- [chatapp] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-08-04T09:53:22.841+07:00  INFO 16128 --- [chatapp] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-08-04T09:53:23.254+07:00  INFO 16128 --- [chatapp] [main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-08-04T09:53:24.462+07:00  WARN 16128 --- [chatapp] [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-08-04T09:53:24.512+07:00  WARN 16128 --- [chatapp] [main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 4c082d53-7eaa-4e2d-a029-6a8047501f69

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-08-04T09:53:24.524+07:00  INFO 16128 --- [chatapp] [main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-08-04T09:53:24.860+07:00 DEBUG 16128 --- [chatapp] [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, JwtFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-08-04T09:53:25.274+07:00  INFO 16128 --- [chatapp] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-08-04T09:53:25.285+07:00  INFO 16128 --- [chatapp] [main] com.example.chat.ChatappApplication      : Started ChatappApplication in 8.169 seconds (process running for 8.878)
2025-08-04T10:11:21.612+07:00  INFO 18824 --- [chatapp] [main] c.example.chat.ChatappApplicationTests   : Starting ChatappApplicationTests using Java 22.0.2 with PID 18824 (started by Admin in D:\Code\VCC_Java_Framework_Ass\chat)
2025-08-04T10:11:21.613+07:00 DEBUG 18824 --- [chatapp] [main] c.example.chat.ChatappApplicationTests   : Running with Spring Boot v3.5.4, Spring v6.2.9
2025-08-04T10:11:21.614+07:00  INFO 18824 --- [chatapp] [main] c.example.chat.ChatappApplicationTests   : No active profile set, falling back to 1 default profile: "default"
2025-08-04T10:11:22.520+07:00  INFO 18824 --- [chatapp] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-08-04T10:11:22.607+07:00  INFO 18824 --- [chatapp] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 74 ms. Found 3 JPA repository interfaces.
2025-08-04T10:11:23.422+07:00  INFO 18824 --- [chatapp] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-08-04T10:11:23.546+07:00  INFO 18824 --- [chatapp] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.22.Final
2025-08-04T10:11:23.606+07:00  INFO 18824 --- [chatapp] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-08-04T10:11:24.121+07:00  INFO 18824 --- [chatapp] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-08-04T10:11:24.186+07:00  INFO 18824 --- [chatapp] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-08-04T10:11:24.487+07:00  INFO 18824 --- [chatapp] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@69ba72da
2025-08-04T10:11:24.491+07:00  INFO 18824 --- [chatapp] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-08-04T10:11:24.571+07:00  WARN 18824 --- [chatapp] [main] o.h.e.j.e.i.JdbcEnvironmentInitiator     : HHH000339: Could not obtain connection metadata: java.sql.SQLSyntaxErrorException: Unknown column 'RESERVED' in 'WHERE'
2025-08-04T10:11:24.607+07:00  WARN 18824 --- [chatapp] [main] org.hibernate.orm.deprecation            : HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-08-04T10:11:24.609+07:00  WARN 18824 --- [chatapp] [main] org.hibernate.orm.deprecation            : HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-08-04T10:11:24.629+07:00  INFO 18824 --- [chatapp] [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-08-04T10:11:25.846+07:00  INFO 18824 --- [chatapp] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-08-04T10:11:26.460+07:00  INFO 18824 --- [chatapp] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-08-04T10:11:26.772+07:00  INFO 18824 --- [chatapp] [main] com.example.chat.util.JwtUtil            : JWT Util initialized with secret key (length: 47)
2025-08-04T10:11:26.971+07:00  INFO 18824 --- [chatapp] [main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-08-04T10:11:28.870+07:00  WARN 18824 --- [chatapp] [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-08-04T10:11:29.066+07:00  WARN 18824 --- [chatapp] [main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 10c105af-e0b8-48ac-84df-6aae2fcff2a3

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-08-04T10:11:29.101+07:00  INFO 18824 --- [chatapp] [main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-08-04T10:11:29.850+07:00 DEBUG 18824 --- [chatapp] [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, JwtFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-08-04T10:11:31.014+07:00  INFO 18824 --- [chatapp] [main] c.example.chat.ChatappApplicationTests   : Started ChatappApplicationTests in 9.84 seconds (process running for 11.088)
2025-08-04T10:11:31.974+07:00  INFO 18824 --- [chatapp] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-08-04T10:11:31.979+07:00  INFO 18824 --- [chatapp] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-08-04T10:11:32.022+07:00  INFO 18824 --- [chatapp] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-08-04T10:22:56.154+07:00  INFO 11852 --- [chatapp] [main] c.example.chat.ChatappApplicationTests   : Starting ChatappApplicationTests using Java 22.0.2 with PID 11852 (started by Admin in D:\Code\VCC_Java_Framework_Ass\chat)
2025-08-04T10:22:56.155+07:00 DEBUG 11852 --- [chatapp] [main] c.example.chat.ChatappApplicationTests   : Running with Spring Boot v3.5.4, Spring v6.2.9
2025-08-04T10:22:56.157+07:00  INFO 11852 --- [chatapp] [main] c.example.chat.ChatappApplicationTests   : No active profile set, falling back to 1 default profile: "default"
2025-08-04T10:22:57.104+07:00  INFO 11852 --- [chatapp] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-08-04T10:22:57.198+07:00  INFO 11852 --- [chatapp] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 74 ms. Found 3 JPA repository interfaces.
2025-08-04T10:22:58.120+07:00  INFO 11852 --- [chatapp] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-08-04T10:22:58.188+07:00  INFO 11852 --- [chatapp] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.22.Final
2025-08-04T10:22:58.229+07:00  INFO 11852 --- [chatapp] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-08-04T10:22:58.648+07:00  INFO 11852 --- [chatapp] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-08-04T10:22:58.699+07:00  INFO 11852 --- [chatapp] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-08-04T10:22:58.973+07:00  INFO 11852 --- [chatapp] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@5fc1e4fb
2025-08-04T10:22:58.977+07:00  INFO 11852 --- [chatapp] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-08-04T10:22:59.037+07:00  WARN 11852 --- [chatapp] [main] o.h.e.j.e.i.JdbcEnvironmentInitiator     : HHH000339: Could not obtain connection metadata: java.sql.SQLSyntaxErrorException: Unknown column 'RESERVED' in 'WHERE'
2025-08-04T10:22:59.062+07:00  WARN 11852 --- [chatapp] [main] org.hibernate.orm.deprecation            : HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-08-04T10:22:59.064+07:00  WARN 11852 --- [chatapp] [main] org.hibernate.orm.deprecation            : HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-08-04T10:22:59.080+07:00  INFO 11852 --- [chatapp] [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-08-04T10:23:00.042+07:00  INFO 11852 --- [chatapp] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-08-04T10:23:00.614+07:00  INFO 11852 --- [chatapp] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-08-04T10:23:00.992+07:00  INFO 11852 --- [chatapp] [main] com.example.chat.util.JwtUtil            : JWT Util initialized with secret key (length: 47)
2025-08-04T10:23:01.216+07:00  INFO 11852 --- [chatapp] [main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-08-04T10:23:02.108+07:00  WARN 11852 --- [chatapp] [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-08-04T10:23:02.175+07:00  WARN 11852 --- [chatapp] [main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: d8678b9d-43c1-493b-bf44-71ee14dedabc

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-08-04T10:23:02.189+07:00  INFO 11852 --- [chatapp] [main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-08-04T10:23:02.634+07:00 DEBUG 11852 --- [chatapp] [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, JwtFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-08-04T10:23:03.169+07:00  INFO 11852 --- [chatapp] [main] c.example.chat.ChatappApplicationTests   : Started ChatappApplicationTests in 7.574 seconds (process running for 9.812)
2025-08-04T10:23:04.309+07:00 DEBUG 11852 --- [chatapp] [main] c.e.chat.service.impl.AuthServiceImpl    : Refresh token request received
2025-08-04T10:23:04.317+07:00  INFO 11852 --- [chatapp] [main] c.e.chat.service.impl.AuthServiceImpl    : Refresh token valid. New access token issued for 'alice'
2025-08-04T10:23:04.358+07:00  INFO 11852 --- [chatapp] [main] c.e.chat.service.impl.AuthServiceImpl    : Login attempt for username: alice
2025-08-04T10:23:04.369+07:00  INFO 11852 --- [chatapp] [main] c.e.chat.service.impl.AuthServiceImpl    : Login attempt for username: alice
2025-08-04T10:23:04.370+07:00  WARN 11852 --- [chatapp] [main] o.s.s.c.bcrypt.BCryptPasswordEncoder     : Encoded password does not look like BCrypt
2025-08-04T10:23:04.397+07:00 DEBUG 11852 --- [chatapp] [main] c.e.chat.service.impl.AuthServiceImpl    : Refresh token request received
2025-08-04T10:23:04.398+07:00  WARN 11852 --- [chatapp] [main] c.e.chat.service.impl.AuthServiceImpl    : Refresh token invalid or expired: expired
2025-08-04T10:23:04.411+07:00 DEBUG 11852 --- [chatapp] [main] c.e.chat.service.impl.AuthServiceImpl    : Access token valid. Returning protected resource for 'alice'
2025-08-04T10:23:04.417+07:00  INFO 11852 --- [chatapp] [main] c.e.chat.service.impl.AuthServiceImpl    : Login attempt for username: alice
2025-08-04T10:23:04.418+07:00  WARN 11852 --- [chatapp] [main] o.s.s.c.bcrypt.BCryptPasswordEncoder     : Encoded password does not look like BCrypt
2025-08-04T10:23:04.590+07:00  INFO 11852 --- [chatapp] [main] c.e.chat.service.impl.FriendServiceImpl  : User 'bob' accepted friend request from 'alice'
2025-08-04T10:23:04.615+07:00  INFO 11852 --- [chatapp] [main] c.e.chat.service.impl.FriendServiceImpl  : Fetching friend list for user: alice
2025-08-04T10:23:04.617+07:00  INFO 11852 --- [chatapp] [main] c.e.chat.service.impl.FriendServiceImpl  : User 'alice' has 2 friend(s)
2025-08-04T10:23:04.642+07:00  INFO 11852 --- [chatapp] [main] c.e.chat.service.impl.FriendServiceImpl  : User 'bob' declined friend request from 'alice'
2025-08-04T10:23:04.652+07:00  INFO 11852 --- [chatapp] [main] c.e.chat.service.impl.FriendServiceImpl  : User 'alice' sent a friend request to 'bob'
2025-08-04T10:23:04.874+07:00  INFO 11852 --- [chatapp] [main] c.e.c.service.impl.MessageServiceImpl    : Sending message from 'alice' to 'bob'
2025-08-04T10:23:04.875+07:00  INFO 11852 --- [chatapp] [main] c.e.c.service.impl.MessageServiceImpl    : Saved text message from 'alice' to 'bob'
2025-08-04T10:23:04.876+07:00  INFO 11852 --- [chatapp] [main] c.e.c.service.impl.MessageServiceImpl    : Stored message for offline user 'bob'
2025-08-04T10:23:04.895+07:00  INFO 11852 --- [chatapp] [main] c.e.c.service.impl.MessageServiceImpl    : Sending message from 'alice' to 'bob'
2025-08-04T10:23:04.900+07:00  INFO 11852 --- [chatapp] [main] c.e.c.service.impl.MessageServiceImpl    : Saved file message from 'alice' to 'bob' at '805a9e78-88f2-4f5c-981f-e039ba9d426f_test.txt'
2025-08-04T10:23:04.903+07:00  INFO 11852 --- [chatapp] [main] c.e.c.service.impl.MessageServiceImpl    : Stored message for offline user 'bob'
2025-08-04T10:23:04.911+07:00  INFO 11852 --- [chatapp] [main] c.e.c.service.impl.MessageServiceImpl    : Sending message from 'alice' to 'bob'
2025-08-04T10:23:04.912+07:00  WARN 11852 --- [chatapp] [main] c.e.c.service.impl.MessageServiceImpl    : Sender 'alice' is not a friend of 'bob'
2025-08-04T10:23:04.922+07:00  INFO 11852 --- [chatapp] [main] c.e.c.service.impl.MessageServiceImpl    : User 'bob' requests file 'test.txt'
2025-08-04T10:23:04.924+07:00 ERROR 11852 --- [chatapp] [main] c.e.c.service.impl.MessageServiceImpl    : File 'test.txt' not found
2025-08-04T10:23:04.931+07:00  INFO 11852 --- [chatapp] [main] c.e.c.service.impl.MessageServiceImpl    : User 'someoneElse' requests file 'test.txt'
2025-08-04T10:23:04.933+07:00  WARN 11852 --- [chatapp] [main] c.e.c.service.impl.MessageServiceImpl    : Unauthorized file access attempt by 'someoneElse'
2025-08-04T10:23:04.979+07:00  INFO 11852 --- [chatapp] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-08-04T10:23:04.989+07:00  INFO 11852 --- [chatapp] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-08-04T10:23:05.012+07:00  INFO 11852 --- [chatapp] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-08-04T10:26:27.145+07:00  INFO 11116 --- [chatapp] [main] c.example.chat.ChatappApplicationTests   : Starting ChatappApplicationTests using Java 22.0.2 with PID 11116 (started by Admin in D:\Code\VCC_Java_Framework_Ass\chat)
2025-08-04T10:26:27.147+07:00 DEBUG 11116 --- [chatapp] [main] c.example.chat.ChatappApplicationTests   : Running with Spring Boot v3.5.4, Spring v6.2.9
2025-08-04T10:26:27.148+07:00  INFO 11116 --- [chatapp] [main] c.example.chat.ChatappApplicationTests   : No active profile set, falling back to 1 default profile: "default"
2025-08-04T10:26:28.661+07:00  INFO 11116 --- [chatapp] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-08-04T10:26:28.799+07:00  INFO 11116 --- [chatapp] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 120 ms. Found 3 JPA repository interfaces.
2025-08-04T10:26:29.852+07:00  INFO 11116 --- [chatapp] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-08-04T10:26:29.929+07:00  INFO 11116 --- [chatapp] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.22.Final
2025-08-04T10:26:29.977+07:00  INFO 11116 --- [chatapp] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-08-04T10:26:30.662+07:00  INFO 11116 --- [chatapp] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-08-04T10:26:30.722+07:00  INFO 11116 --- [chatapp] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-08-04T10:26:31.071+07:00  INFO 11116 --- [chatapp] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@6fd7aba8
2025-08-04T10:26:31.076+07:00  INFO 11116 --- [chatapp] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-08-04T10:26:31.152+07:00  WARN 11116 --- [chatapp] [main] o.h.e.j.e.i.JdbcEnvironmentInitiator     : HHH000339: Could not obtain connection metadata: java.sql.SQLSyntaxErrorException: Unknown column 'RESERVED' in 'WHERE'
2025-08-04T10:26:31.181+07:00  WARN 11116 --- [chatapp] [main] org.hibernate.orm.deprecation            : HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-08-04T10:26:31.183+07:00  WARN 11116 --- [chatapp] [main] org.hibernate.orm.deprecation            : HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-08-04T10:26:31.207+07:00  INFO 11116 --- [chatapp] [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-08-04T10:26:32.171+07:00  INFO 11116 --- [chatapp] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-08-04T10:26:32.658+07:00  INFO 11116 --- [chatapp] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-08-04T10:26:32.928+07:00  INFO 11116 --- [chatapp] [main] com.example.chat.util.JwtUtil            : JWT Util initialized with secret key (length: 47)
2025-08-04T10:26:33.114+07:00  INFO 11116 --- [chatapp] [main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-08-04T10:26:34.108+07:00  WARN 11116 --- [chatapp] [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-08-04T10:26:34.168+07:00  WARN 11116 --- [chatapp] [main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 7df66701-5493-40f0-b331-49d6c75e97ba

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-08-04T10:26:34.180+07:00  INFO 11116 --- [chatapp] [main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-08-04T10:26:34.540+07:00 DEBUG 11116 --- [chatapp] [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, JwtFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-08-04T10:26:35.042+07:00  INFO 11116 --- [chatapp] [main] c.example.chat.ChatappApplicationTests   : Started ChatappApplicationTests in 9.119 seconds (process running for 11.289)
2025-08-04T10:26:35.996+07:00 DEBUG 11116 --- [chatapp] [main] c.e.chat.service.impl.AuthServiceImpl    : Refresh token request received
2025-08-04T10:26:36.003+07:00  INFO 11116 --- [chatapp] [main] c.e.chat.service.impl.AuthServiceImpl    : Refresh token valid. New access token issued for 'alice'
2025-08-04T10:26:36.029+07:00  INFO 11116 --- [chatapp] [main] c.e.chat.service.impl.AuthServiceImpl    : Login attempt for username: alice
2025-08-04T10:26:36.042+07:00  INFO 11116 --- [chatapp] [main] c.e.chat.service.impl.AuthServiceImpl    : Login attempt for username: alice
2025-08-04T10:26:36.043+07:00  WARN 11116 --- [chatapp] [main] o.s.s.c.bcrypt.BCryptPasswordEncoder     : Encoded password does not look like BCrypt
2025-08-04T10:26:36.071+07:00 DEBUG 11116 --- [chatapp] [main] c.e.chat.service.impl.AuthServiceImpl    : Refresh token request received
2025-08-04T10:26:36.074+07:00  WARN 11116 --- [chatapp] [main] c.e.chat.service.impl.AuthServiceImpl    : Refresh token invalid or expired: expired
2025-08-04T10:26:36.083+07:00 DEBUG 11116 --- [chatapp] [main] c.e.chat.service.impl.AuthServiceImpl    : Access token valid. Returning protected resource for 'alice'
2025-08-04T10:26:36.096+07:00  INFO 11116 --- [chatapp] [main] c.e.chat.service.impl.AuthServiceImpl    : Login attempt for username: alice
2025-08-04T10:26:36.096+07:00  WARN 11116 --- [chatapp] [main] o.s.s.c.bcrypt.BCryptPasswordEncoder     : Encoded password does not look like BCrypt
2025-08-04T10:26:36.217+07:00  INFO 11116 --- [chatapp] [main] c.e.chat.service.impl.FriendServiceImpl  : User 'bob' accepted friend request from 'alice'
2025-08-04T10:26:36.252+07:00  INFO 11116 --- [chatapp] [main] c.e.chat.service.impl.FriendServiceImpl  : Fetching friend list for user: alice
2025-08-04T10:26:36.254+07:00  INFO 11116 --- [chatapp] [main] c.e.chat.service.impl.FriendServiceImpl  : User 'alice' has 2 friend(s)
2025-08-04T10:26:36.266+07:00  INFO 11116 --- [chatapp] [main] c.e.chat.service.impl.FriendServiceImpl  : User 'bob' declined friend request from 'alice'
2025-08-04T10:26:36.274+07:00  INFO 11116 --- [chatapp] [main] c.e.chat.service.impl.FriendServiceImpl  : User 'alice' sent a friend request to 'bob'
2025-08-04T10:26:36.445+07:00  INFO 11116 --- [chatapp] [main] c.e.c.service.impl.MessageServiceImpl    : Sending message from 'alice' to 'bob'
2025-08-04T10:26:36.445+07:00  INFO 11116 --- [chatapp] [main] c.e.c.service.impl.MessageServiceImpl    : Saved text message from 'alice' to 'bob'
2025-08-04T10:26:36.446+07:00  INFO 11116 --- [chatapp] [main] c.e.c.service.impl.MessageServiceImpl    : Stored message for offline user 'bob'
2025-08-04T10:26:36.463+07:00  INFO 11116 --- [chatapp] [main] c.e.c.service.impl.MessageServiceImpl    : Sending message from 'alice' to 'bob'
2025-08-04T10:26:36.466+07:00  INFO 11116 --- [chatapp] [main] c.e.c.service.impl.MessageServiceImpl    : Saved file message from 'alice' to 'bob' at '378109a0-0051-4b34-bc80-3148073b4444_test.txt'
2025-08-04T10:26:36.467+07:00  INFO 11116 --- [chatapp] [main] c.e.c.service.impl.MessageServiceImpl    : Stored message for offline user 'bob'
2025-08-04T10:26:36.476+07:00  INFO 11116 --- [chatapp] [main] c.e.c.service.impl.MessageServiceImpl    : Sending message from 'alice' to 'bob'
2025-08-04T10:26:36.476+07:00  WARN 11116 --- [chatapp] [main] c.e.c.service.impl.MessageServiceImpl    : Sender 'alice' is not a friend of 'bob'
2025-08-04T10:26:36.485+07:00  INFO 11116 --- [chatapp] [main] c.e.c.service.impl.MessageServiceImpl    : User 'bob' requests file 'test.txt'
2025-08-04T10:26:36.495+07:00  INFO 11116 --- [chatapp] [main] c.e.c.service.impl.MessageServiceImpl    : User 'someoneElse' requests file 'test.txt'
2025-08-04T10:26:36.495+07:00  WARN 11116 --- [chatapp] [main] c.e.c.service.impl.MessageServiceImpl    : Unauthorized file access attempt by 'someoneElse'
2025-08-04T10:26:36.529+07:00  INFO 11116 --- [chatapp] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-08-04T10:26:36.533+07:00  INFO 11116 --- [chatapp] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-08-04T10:26:36.549+07:00  INFO 11116 --- [chatapp] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-08-04T10:32:26.651+07:00  INFO 22056 --- [chatapp] [main] c.example.chat.ChatappApplicationTests   : Starting ChatappApplicationTests using Java 22.0.2 with PID 22056 (started by Admin in D:\Code\VCC_Java_Framework_Ass\chat)
2025-08-04T10:32:26.652+07:00 DEBUG 22056 --- [chatapp] [main] c.example.chat.ChatappApplicationTests   : Running with Spring Boot v3.5.4, Spring v6.2.9
2025-08-04T10:32:26.652+07:00  INFO 22056 --- [chatapp] [main] c.example.chat.ChatappApplicationTests   : No active profile set, falling back to 1 default profile: "default"
2025-08-04T10:32:27.739+07:00  INFO 22056 --- [chatapp] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-08-04T10:32:27.833+07:00  INFO 22056 --- [chatapp] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 80 ms. Found 3 JPA repository interfaces.
2025-08-04T10:32:28.598+07:00  INFO 22056 --- [chatapp] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-08-04T10:32:28.675+07:00  INFO 22056 --- [chatapp] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.22.Final
2025-08-04T10:32:28.729+07:00  INFO 22056 --- [chatapp] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-08-04T10:32:29.169+07:00  INFO 22056 --- [chatapp] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-08-04T10:32:29.214+07:00  INFO 22056 --- [chatapp] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-08-04T10:32:29.486+07:00  INFO 22056 --- [chatapp] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@e886caf
2025-08-04T10:32:29.488+07:00  INFO 22056 --- [chatapp] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-08-04T10:32:29.544+07:00  WARN 22056 --- [chatapp] [main] o.h.e.j.e.i.JdbcEnvironmentInitiator     : HHH000339: Could not obtain connection metadata: java.sql.SQLSyntaxErrorException: Unknown column 'RESERVED' in 'WHERE'
2025-08-04T10:32:29.566+07:00  WARN 22056 --- [chatapp] [main] org.hibernate.orm.deprecation            : HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-08-04T10:32:29.567+07:00  WARN 22056 --- [chatapp] [main] org.hibernate.orm.deprecation            : HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-08-04T10:32:29.584+07:00  INFO 22056 --- [chatapp] [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-08-04T10:32:30.482+07:00  INFO 22056 --- [chatapp] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-08-04T10:32:31.277+07:00  INFO 22056 --- [chatapp] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-08-04T10:32:31.510+07:00  INFO 22056 --- [chatapp] [main] com.example.chat.util.JwtUtil            : JWT Util initialized with secret key (length: 47)
2025-08-04T10:32:31.696+07:00  INFO 22056 --- [chatapp] [main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-08-04T10:32:32.457+07:00  WARN 22056 --- [chatapp] [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-08-04T10:32:32.510+07:00  WARN 22056 --- [chatapp] [main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: bfa62eb0-1f14-46ad-9cd3-6f17277558aa

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-08-04T10:32:32.522+07:00  INFO 22056 --- [chatapp] [main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-08-04T10:32:32.854+07:00 DEBUG 22056 --- [chatapp] [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, JwtFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-08-04T10:32:33.352+07:00  INFO 22056 --- [chatapp] [main] c.example.chat.ChatappApplicationTests   : Started ChatappApplicationTests in 7.165 seconds (process running for 8.466)
2025-08-04T10:32:34.642+07:00  WARN 22056 --- [chatapp] [main] c.e.chat.service.impl.AuthServiceImpl    : Logout failed: invalid token - invalid
2025-08-04T10:32:34.815+07:00  INFO 22056 --- [chatapp] [main] c.e.chat.service.impl.AuthServiceImpl    : Login attempt for username: alice
2025-08-04T10:32:35.018+07:00  INFO 22056 --- [chatapp] [main] c.e.chat.service.impl.AuthServiceImpl    : Login attempt for username: alice
2025-08-04T10:32:35.108+07:00  INFO 22056 --- [chatapp] [main] c.e.chat.service.impl.AuthServiceImpl    : Logout requested by user 'alice'
2025-08-04T10:32:35.109+07:00  INFO 22056 --- [chatapp] [main] c.e.chat.service.impl.AuthServiceImpl    : Access token deleted for 'alice'
2025-08-04T10:32:35.311+07:00  INFO 22056 --- [chatapp] [main] c.e.chat.service.impl.AuthServiceImpl    : Login attempt for username: alice
2025-08-04T10:32:35.492+07:00 DEBUG 22056 --- [chatapp] [main] c.e.chat.service.impl.AuthServiceImpl    : Access token valid. Returning protected resource for 'alice'
2025-08-04T10:32:35.577+07:00 DEBUG 22056 --- [chatapp] [main] c.e.chat.service.impl.AuthServiceImpl    : Refresh token request received
2025-08-04T10:32:35.578+07:00  WARN 22056 --- [chatapp] [main] c.e.chat.service.impl.AuthServiceImpl    : Refresh token invalid or expired: expired
2025-08-04T10:32:35.661+07:00 DEBUG 22056 --- [chatapp] [main] c.e.chat.service.impl.AuthServiceImpl    : Refresh token request received
2025-08-04T10:32:35.662+07:00  INFO 22056 --- [chatapp] [main] c.e.chat.service.impl.AuthServiceImpl    : Refresh token valid. New access token issued for 'alice'
2025-08-04T10:32:35.746+07:00  INFO 22056 --- [chatapp] [main] c.e.chat.service.impl.AuthServiceImpl    : Register attempt for username: alice
2025-08-04T10:32:35.820+07:00  INFO 22056 --- [chatapp] [main] c.e.chat.service.impl.AuthServiceImpl    : User 'alice' registered successfully
2025-08-04T10:32:35.895+07:00  INFO 22056 --- [chatapp] [main] c.e.chat.service.impl.AuthServiceImpl    : Register attempt for username: alice
2025-08-04T10:32:35.968+07:00  INFO 22056 --- [chatapp] [main] c.e.chat.service.impl.FriendServiceImpl  : User 'bob' accepted friend request from 'alice'
2025-08-04T10:32:35.982+07:00  INFO 22056 --- [chatapp] [main] c.e.chat.service.impl.FriendServiceImpl  : Fetching friend list for user: alice
2025-08-04T10:32:35.984+07:00  INFO 22056 --- [chatapp] [main] c.e.chat.service.impl.FriendServiceImpl  : User 'alice' has 2 friend(s)
2025-08-04T10:32:35.990+07:00  INFO 22056 --- [chatapp] [main] c.e.chat.service.impl.FriendServiceImpl  : User 'bob' declined friend request from 'alice'
2025-08-04T10:32:35.999+07:00  INFO 22056 --- [chatapp] [main] c.e.chat.service.impl.FriendServiceImpl  : User 'alice' sent a friend request to 'bob'
2025-08-04T10:32:36.141+07:00  INFO 22056 --- [chatapp] [main] c.e.c.service.impl.MessageServiceImpl    : Sending message from 'alice' to 'bob'
2025-08-04T10:32:36.144+07:00  INFO 22056 --- [chatapp] [main] c.e.c.service.impl.MessageServiceImpl    : Saved text message from 'alice' to 'bob'
2025-08-04T10:32:36.145+07:00  INFO 22056 --- [chatapp] [main] c.e.c.service.impl.MessageServiceImpl    : Stored message for offline user 'bob'
2025-08-04T10:32:36.153+07:00  INFO 22056 --- [chatapp] [main] c.e.c.service.impl.MessageServiceImpl    : Sending message from 'alice' to 'bob'
2025-08-04T10:32:36.157+07:00  INFO 22056 --- [chatapp] [main] c.e.c.service.impl.MessageServiceImpl    : Saved file message from 'alice' to 'bob' at '021cfdfc-9b3d-49bf-8423-a41aa1ad6372_test.txt'
2025-08-04T10:32:36.157+07:00  INFO 22056 --- [chatapp] [main] c.e.c.service.impl.MessageServiceImpl    : Stored message for offline user 'bob'
2025-08-04T10:32:36.164+07:00  INFO 22056 --- [chatapp] [main] c.e.c.service.impl.MessageServiceImpl    : Sending message from 'alice' to 'bob'
2025-08-04T10:32:36.165+07:00  WARN 22056 --- [chatapp] [main] c.e.c.service.impl.MessageServiceImpl    : Sender 'alice' is not a friend of 'bob'
2025-08-04T10:32:36.175+07:00  INFO 22056 --- [chatapp] [main] c.e.c.service.impl.MessageServiceImpl    : User 'bob' requests file 'test.txt'
2025-08-04T10:32:36.191+07:00  INFO 22056 --- [chatapp] [main] c.e.c.service.impl.MessageServiceImpl    : User 'someoneElse' requests file 'test.txt'
2025-08-04T10:32:36.192+07:00  WARN 22056 --- [chatapp] [main] c.e.c.service.impl.MessageServiceImpl    : Unauthorized file access attempt by 'someoneElse'
2025-08-04T10:32:36.231+07:00  INFO 22056 --- [chatapp] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-08-04T10:32:36.236+07:00  INFO 22056 --- [chatapp] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-08-04T10:32:36.254+07:00  INFO 22056 --- [chatapp] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-08-04T10:34:05.860+07:00  INFO 16128 --- [chatapp] [SpringApplicationShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2025-08-04T10:34:05.888+07:00  INFO 16128 --- [chatapp] [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2025-08-04T10:34:05.895+07:00  INFO 16128 --- [chatapp] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-08-04T10:34:05.905+07:00  INFO 16128 --- [chatapp] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-08-04T10:34:05.907+07:00  INFO 16128 --- [chatapp] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
